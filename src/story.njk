---
permalink: /api/story/{{ story.data.name | slug }}.json
pagination:
  data: collections.stories
  size: 1
  alias: story
---
{% set data = story.data %}
{
  "slug": "{{ story.data.name | slugify }}",
  "name": "{{ story.data.name | safe }}",
  "title": "{{ story.data.title | safe }}",
  "image": "{{ story.data.image | safe }}",
  "content": "{{ story.templateContent | jsonify | safe }}",
  "location": {{ story.data.location | safe }},
  "location_name": "{{ story.data.location_name | safe }}",
  "photos": [
    {% for photo in story.data.photos %}
      {% if photo.file %}
        {
          {% if photo.caption %}"caption" : "{{ photo.caption }}",{% endif %}
          {% if photo.date %}"date" : "{{ photo.date }}",{% endif %}
          {% if photo.source %}"source" : "{{ photo.source }}",{% endif %}
          "file_small": "{{ photo.file | replace('/image/upload/', '/image/upload/w_300,h_300,c_fill,q_65,f_auto/') | safe}}",
          "file_large": "{{ photo.file | replace('/image/upload/', '/image/upload/w_900,h_900,c_fit,q_85,f_auto/') | safe}}"
        }{% if loop.last %}{% else %},{% endif %}
      {% endif %}
    {% endfor %}
  ],
  "previous": "{{ pagination.href.previous | replace('/api/story/', '') | replace('.json', '') }}",
  "next": "{{ pagination.href.next | replace('/api/story/', '') | replace('.json', '') }}"
}